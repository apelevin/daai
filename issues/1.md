Да. Вот список ключевых нерешённых проблем (технических и продуктовых), которые сейчас реально мешают DAAI работать “как ожидается”.

A. Надёжность фиксации контракта (главная боль)

1. Разрыв между “текстом в треде” и “реально сохранённым состоянием”
Бот может написать “✅ контракт зафиксирован”, но:
  • файла в contracts/<id>.md нет,
  • в contracts/index.json статус не agreed,
  • в логах нет Saved contract: <id>.
Нужно: финальный “✅ сохранено” формировать только после успешного save_contract (желательно программно, не через LLM).
2. Валидатор требует строгий формат, а LLM часто генерит “человеческую” формулу без маркеров
Сейчас validate_contract требует:
  • секции “Известные проблемы”, “Связанные контракты” непустые
  • в “Формула” обязательно Человеческая: и Псевдо‑SQL:
Нужен либо: автоматический “format-fix” перед сохранением, либо шаблон, который LLM гарантированно соблюдает.
3. Governance policy (tier_2) легко клинит из‑за ролей
Даже при согласовании людьми сохранение блокируется, если:
  • роли не назначены как data_lead/circle_lead в машинном виде,
  • или ## Согласовано не содержит нужных @username в формате.
Нужно: более устойчивый pipeline “назначили роли → автоматически добавили их в ## Согласовано → save”.

B. Роли и упоминания (вокруг Circle Lead / Data Lead)

4. Mattermost UI/текст упоминаний может приходить как display name, а policy требует username
Мы начали решать через резолв, но судя по твоим симптомам, остаются кейсы, где в state попадает кириллица.
Нужно: всегда нормализовать в username, а если не получилось — не сохранять мусор.
5. Конфликт read-only context/ и изменяемых данных
context монтирован :ro (правильно), но раньше код пытался писать туда (context/roles.json).
Сейчас правильная архитектура: всё изменяемое — в tasks//drafts//contracts/. Нужно убедиться, что везде так.

C. Поток обработки в треде (ощущение “несколько процессов”)

6. Нет “жёсткой транзакции” для одного контракта в одном треде
Сообщения быстро идут, бот делает retry, роутер иногда переключает типы — создаётся ощущение параллельных веток.
Нужны:
  • более строгий thread→contract binding,
  • “state machine” на контракт: in_review → ready_to_save → saved,
  • и устойчивый дедуп/идемпотентность.
7. Дедупликация событий только в памяти процесса
После рестарта/реконнекта WS возможны повторные обработки.
Нужен persistent dedup (хотя бы на сутки) или более строгая проверка “мы уже отвечали на этот post_id”.

D. UX / ясность для участников

8. Роли Circle Lead / Data Lead требуют пояснения (ты это поднял правильно)
Мы добавили краткое объяснение при блокировке policy, но стоит ещё:
  • показывать “почему именно этот человек закрывает роль” (username + роль),
  • и что это значит для ответственности.
9. Нет команды/механизма “показать факт сохранения”
Нужна команда типа:
  • покажи контракт <id> (из contracts/)
  • покажи draft <id> (из drafts/)
  • какой статус <id> (строго из index.json)
Это убирает спор “сохранилось или просто написали”.
