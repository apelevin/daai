# Data Contract: Сегментирование клиентов по тирам

## Статус
Черновик

## Определение
Автоматическое распределение клиентов по сегментам (Tier 1/2/3) на основе выручки с fallback на отраслевую принадлежность через ОКВЭД.

## Формула
```
IF выручка >= 10 млрд → Tier 1
ELSE IF выручка >= 1 млрд → Tier 2  
ELSE IF выручка > 0 → Tier 3
ELSE IF основной_ОКВЭД IN ['64.19', '64.92', '64.92.1', '64.11', '65.11', '65.12', '65.12.2', '65.12.1'] → Tier 1
ELSE → Tier 3
```

## Источник данных
- **Выручка**: Casebook API
- **ОКВЭД**: внутренний API (основной ОКВЭД компании)

## Включает
- Все клиенты с доступными данными о выручке
- Банки и страховые компании (по ОКВЭД) при отсутствии данных о выручке

## Исключения
- Клиенты без данных о выручке и без банковских/страховых ОКВЭД попадают в Tier 3

## Гранулярность
Обновление при изменении данных о выручке или ОКВЭД клиента

## Ответственный за данные
@pavelpetrin — за корректность получения данных из Casebook API и внутреннего API

## Ответственный за расчёт
@pavelpetrin — за реализацию логики сегментирования

## Связь с Extra Time
Корректная сегментация → правильная стратегия продаж → больше подходящих клиентов → больше использования продуктов → больше Extra Time

## Потребители
- Sales команда (@s.yudaev, @v.ginina1) — для формирования стратегии продаж
- @pelevin — для аналитики захвата рынка

## Состояние данных
- Данные есть: выручка из Casebook API, ОКВЭД из внутреннего API
- Данные есть, но качество под вопросом: полнота покрытия выручки в Casebook API
- Данных нет: критерии качества данных о выручке

## Известные проблемы
- Текущая логика приоритизирует любой ОКВЭД над выручкой
- Нет проверки основного vs дополнительного ОКВЭД

## Согласовано
(в процессе)

## История изменений
2026-02-20 — создан черновик на основе проблемы от @pavelpetrin