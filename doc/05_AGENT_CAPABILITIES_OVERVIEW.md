# AI-архитектор метрик: обзор возможностей агента

Документ для команды. Описание того, что агент умеет сейчас и что планируется в следующих релизах — без технических деталей, только функциональность и возможности.

---

## Что это за агент

AI-агент в канале Mattermost «Data Contracts» помогает компании договориться о едином языке данных: что значит каждая метрика, как она считается, кто за неё отвечает. Результат — согласованные Data Contracts: одностраничные договорённости, которые становятся единственным источником правды для формул и определений.

Агент не принимает решений за людей и не подменяет инженера данных. Он ведёт обсуждения, собирает ответы, подсвечивает противоречия и фиксирует то, на чём договорились люди.

---

## Текущий релиз (MVP)

### Согласование контрактов

- **Инициация обсуждений** — агент берёт метрику из очереди, создаёт тред в канале, описывает задачу и привлекает нужных людей.
- **Структурированные вопросы** — задаёт вопросы по определению метрики, источнику данных и ответственности.
- **Асинхронность** — не нужны созвоны; люди отвечают когда удобно, агент собирает ответы и сравнивает их.
- **Подсветка расхождений** — если ответы противоречат друг другу, агент показывает оба варианта и предлагает варианты решения.

### Разрешение тупиков

- **Процедура консента** — при застревании формулирует предложение, привязывает его к стратегии (Extra Time), спрашивает про аргументированные возражения. Нет возражений — фиксируем.
- **Варианты вместо диктата** — агент предлагает варианты, решение принимают люди.

### Напоминания и эскалация

- **Система напоминаний** — если человек не ответил, агент напоминает в треде, затем упрощает задачу до выбора из двух вариантов, при необходимости пишет в личку и эскалирует.
- **Снижение барьера** — каждое напоминание делается так, чтобы проще было ответить; цель — довести согласование до конца.

### Онбординг и профили

- **Онбординг участников** — помогает новым людям войти в контекст канала и процесса.
- **Профилирование** — хранит информацию об участниках (роль, компетенции) и использует её при привлечении к обсуждениям.

### Результат и доступ

- **Фиксация контрактов** — согласованный контракт сохраняется, публикуется в канале и доступен любому.
- **Вопросы в личку** — можно спросить агента в личку «как мы считаем WIN NI?» и получить ответ с формулой и датой согласования.
- **Версионирование** — контракты хранятся с историей изменений.

### Стратегический контекст

- **Привязка к Extra Time** — при спорах агент проверяет, какой вариант лучше отражает ценность для клиента и связь со стратегической метрикой компании.

### Тестирование

- **Симулятор** — возможность тестировать сценарии без живых пользователей.

---

## Чего агент не делает (сейчас и в обозримом будущем)

- **Не принимает решений за людей** — только предлагает варианты и фиксирует выбор.
- **Не придумывает данные** — если чего-то не знает, говорит об этом явно.
- **Не заменяет инженера данных** — инженер строит хранилища и витрины; агент формирует требования: что считать и по какой формуле.
- **Не раскрывает конфиденциальные профили** — оценки и паттерны по участникам не показываются другим.
- **Не проверяет цифры в базе (в MVP)** — помогает договориться о том, что означают цифры; проверка данных в БД — следующий шаг.

---

## Ближайшие релизы (Senior-уровень)

Планируется переход от «реактивного фасилитатора» к «проактивному архитектору»: агент не только ведёт согласования по запросу, но и сам находит проблемы и предлагает действия.

### Релиз 1: Проактивность (ориентир: ~2 недели)

- **Поиск конфликтов метрик** — автоматически ищет расхождения: одинаковые названия при разных формулах, пересекающиеся определения, разрывы в цепочке от Extra Time. Создаёт треды с найденными конфликтами и привлекает ответственных.
- **Граф зависимостей метрик** — строит и показывает связи между метриками и Extra Time. По запросу: «какие метрики влияют на Extra Time?», «найди метрики-сироты» (без связи со стратегией).
- **Метрики-призраки** — раз в неделю сканирует переписку на упоминания метрик без контрактов и предлагает добавить их в очередь.
- **Проверка контрактов перед финализацией** — перед сохранением проверяет полноту и непротиворечивость (формула, источник, ответственный, связь с Extra Time) и предлагает доработки при необходимости.

**Ожидаемый эффект:** агент находит несколько конфликтов в уже существующих контрактах без явного запроса.

---

### Релиз 2: Интеллект (ориентир: ~2 недели)

- **Шаблоны контрактов** — по типу метрики (конверсия, финансы, вовлечённость и т.д.) подставляет подходящий шаблон и примеры, адаптирует вопросы.
- **Связи между контрактами** — явные связи между метриками (подмножество, агрегация, обратная связь и т.д.), автоматическое выявление при обсуждениях и формулах.
- **Бизнес-глоссарий** — единые термины и синонимы; при неоднозначности агент уточняет и ссылается на глоссарий.
- **Расширенные профили участников** — стиль коммуникации (детализация, формат, скорость), использование при формулировании вопросов и напоминаний.

**Ожидаемый эффект:** рост качества новых контрактов (целевой уровень — 8.5/10 по полноте и ясности).

---

### Релиз 3: Управление и политики (ориентир: ~1 неделя)

- **Жизненный цикл контрактов** — статусы (черновик → на согласовании → согласован → активен → устарел → архив). Автоматические напоминания о пересмотре (срок давности, смена источника данных, конфликты, частые вопросы).
- **Политики согласования** — разные правила для стратегических, операционных и диагностических метрик: кто должен согласовать, порог консенсуса, как часто пересматривать.
- **Метрики качества системы** — покрытие (сколько метрик уже с контрактами), качество контрактов, использование (какие чаще запрашивают), эффективность процесса (срок согласования, число согласованных за период).
- **Дашборд для контролёра** — одна команда (например, `/contracts stats`) с общей картиной: статистика, что требует внимания, топ активных участников.

**Ожидаемый эффект:** контролёр видит полную картину системы контрактов и может управлять приоритетами и пересмотрами.

---

### Релиз 4: Память и обучение (ориентир: ~1 неделя)

- **Журнал решений с обоснованиями** — почему выбрали тот или иной вариант, какие альтернативы рассматривали, как разрешили конфликт. По запросу «почему так решили?» агент даёт полный контекст.
- **Паттерны переговоров** — какие приёмы (расширение пирога, общие интересы, временное решение) лучше сработали в каких ситуациях; агент выбирает стратегию под тип конфликта и участников.
- **Учёт ошибок** — фиксация ситуаций, последствий и корректирующих правил, чтобы не повторять одни и те же ошибки.
- **Адаптивные напоминания** — интервалы и форма напоминаний зависят от критичности контракта, истории ответов участника и шага эскалации.

**Ожидаемый эффект:** агент предлагает готовое или типовое решение для большинства типовых конфликтов (целевой уровень — 70%+).

---

## Дальнейшая эволюция (после Senior-уровня)

- **Интеграция с базой данных (PostgreSQL)** — проверка данных в БД, показ реальных цифр в обсуждениях, мониторинг соблюдения контрактов в данных.
- **Дерево метрик от Extra Time** — явная иерархия от North Star до операционных и диагностических метрик.
- **Квартальный аудит** — автоматическая проверка связи метрик кругов со стратегией компании.
- **Гипотезы** — генерация гипотез, влияющих на выручку и стратегические метрики.
- **Роль круга A&D** — переход от реактивной отчётности к систематическому поиску ограничений в данных и формулированию гипотез роста при опоре на агента как ядро процесса.

---

## Итоговые ориентиры

| Аспект | Сейчас (MVP) | Цель (Senior) |
|--------|----------------|----------------|
| Время согласования контракта | ~12 дней | ~6 дней |
| Качество контрактов (оценка) | ~7/10 | ~8.5/10 |
| Покрытие метрик контрактами | ~40% | ~85% |
| Обнаружение конфликтов | только по запросу | автоматически (еженедельно) |
| Пересмотр контрактов | по факту | регулярно (для критичных — ежеквартально) |

Каждый следующий релиз опирается на предыдущий: без контрактов нет витрин, без витрин — полноценного аудита, без аудита — системных гипотез. Data Contracts остаются фундаментом.
